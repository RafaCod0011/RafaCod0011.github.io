<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoboFilm - Productora de Audiovisuales</title>
    <link rel="stylesheet" href="indexstyles.css">

</head>
<body>

    <main>
        <nav>
            <div class="menu">
                <ul>
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="fotografia.html">FOTOGRAFIA</a></li>
                    <li><a href="videos.html">VIDEOS</a></li>
                    <li><a href="contacto.html">CONTACTO</a></li>
                </ul>
            </div>
            <div class="redes">
                <a href="https://www.instagram.com" target="_blank">
                    <img src="/images/instagram-svgrepo-com.png" alt="Instagram">
                </a>
                <a href="https://www.facebook.com" target="_blank">
                    <img src="/images/facebook-svgrepo-com.png" alt="Facebook">
                </a>       
                <a href="https://www.youtube.com" target="_blank">
                    <img src="/images/youtube-svgrepo-com.png" alt="YouTube">
                </a> 
            </div>  
        </nav>
    </main>

    <div class="presentacion">
        <h1 id="contacto" class="nosotros">CONTACTATE CON NOSOTROS</h1>
        
    </div>    
    
    <form id="miFormulario" novalidate onsubmit="return validarForm()">
        <div class="formulario">
            <div class="campos">
                <div class="form-group">
                    <label for="nombre">NOMBRE:</label>
                    <input type="text" id="nombre" name="nick">
                </div>
                <div class="form-group">
                    <label for="apellido">APELLIDO:</label>
                    <input type="text" id="apellido" name="subname">
                </div>
                <div class="form-group">
                    <label for="mail">MAIL:</label>
                    <input type="email" id="mail" name="email" onfocus="limpiarInput(event)"><div class="contenedor-error"><span style="display:none;" id="spanErrorMail">Mail no valido</span></div>
                </div>
                <div class="form-group">
                    <label for="telefono">TELEFONO:</label>
                    <input type="text" id="telefono" name="telf" onfocus="limpiarInput(event)"><div class="contenedor-error"><span style="display:none;" id="spanErrorTelf">Telefono no valido</span></div>
                </div>
                <div class="form-group">
                    <label for="sex">MOTIVO:</label>
                    <select id="sex" name="sexo">
                        <option value="" disabled selected>Seleccione un motivo</option>
                        <option value="Presupuesto">Presupuesto</option>
                        <option value="Promocions">Promociones</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                     <label for="mensajeContacto">Mensaje:</label>
                     <textarea id="mensajeContacto" name="mensajeContacto" maxlength="200"></textarea>
                </div>
            </div>
            <div class="imagen">
                <img src="./images/Backstage/Back3_gris2.jpg" alt="DescripciÃ³n de la imagen">
            </div>
        </div>
        <div >
            <input type="submit" name="enviar" id="enviar">
        </div>
    </form>
    
    <div style="display:none;" id="resultado">
        <span id="generalError" style="display:none; color:red;">Por favor, complete todos los campos requeridos.</span>
    </div>

    <script>
    function validarForm(){

    let flagError=false;

    let emailElem = document.getElementById('mail');
    let telfElem = document.getElementById('telefono');
    let nombreElem = document.getElementById('nombre');
    let apellidoElem = document.getElementById('apellido');
    let mensajeElem = document.getElementById('mensajeContacto');

    let email = emailElem.value;
    let telf = telfElem.value;
    let nombre = nombreElem.value;
    let apellido = apellidoElem.value;
    let mensaje = mensajeElem.value;


    let testEmail = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    let testTelf= /^\+?[0-9]{10,15}$/;


    if(nombre === '' || apellido === '' || mensaje === '' || email===''|| telf===''){
        let res= document.getElementById('resultado');
        res.style.display = 'block';
        document.getElementById('generalError').style.display = 'block';
        flagError = true;
    } else {
        document.getElementById('generalError').style.display = 'none';
    }

    if(!testEmail.test(email)){
        document.getElementById('spanErrorMail').style.display='block';
        flagError=true;
    }else {
        document.getElementById('spanErrorMail').style.display = 'none';
    }

    if(!testTelf.test(telf)){
        document.getElementById('spanErrorTelf').style.display='block';
        flagError=true;
    }else {
        document.getElementById('spanErrorTelf').style.display = 'none';
    }
    console.log("flagError: ", flagError);

    if(!flagError){
        
        let res= document.getElementById('resultado');
        let text= document.createElement('h2');
        text.innerHTML='Mensaje enviado correctamente.';
        res.appendChild(text);
        res.style.display = 'block';
        document.getElementById('mail').value='';
        document.getElementById('telefono').value='';
        document.getElementById('nombre').value = '';
        document.getElementById('apellido').value = '';
        document.getElementById('sex').selectedIndex = 0;
        document.getElementById('mensajeContacto').value = '';
        console.log('hola')
    }
    

    return false;
}
    function limpiarInput(e){
        let spanError= e.target.nextSibling;
        if (spanError && spanError.style.display === 'block') {
        spanError.style.display = 'none';
    }
    document.getElementById('mail').addEventListener('input', limpiarInput);
    document.getElementById('telefono').addEventListener('input', limpiarInput);
}
    </script>
</body>
<footer class="footer">
    <div class="footer-columna izquierda">
        <img src="/images/Logo/logo2-invert.jpg" alt="Imagen" class="footer-img">
    </div>
    <div class="footer-columna central">
        <p>&copy; Todos los derechos resevados</p> 
        <p>Rafael Nicolas Cuello / Manuel Facundo Martin Garcia - </p>
        <p>San Luis - Octubre 2024</p>
    </div>
    <div class="footer-columna derecha">
        <img src="/images/Logo/logo2-invert.jpg" alt="Imagen" class="footer-img">
    </div>
</footer>
</html>